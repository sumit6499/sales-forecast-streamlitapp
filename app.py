import streamlit as st
import pandas as pd
import numpy as np
import pickle as pk


with open("model_pickle", "rb") as f:
    regressor = pk.load(f)

with open("scaler_pickle", "rb") as f:
    scaler = pk.load(f)



st.title("sales forecasting using linear regression")

sales_data=[st.number_input(f"Enter sales of month {i+1}") for i in range(12)]
st.write(sales_data)

sales_test_data=[[-1.02969191,  0.23622217, -0.06153967, -0.31721347, -0.6818654 ,
         0.68373706,  0.27014738,  0.53391541,  0.65929759,  0.977295  ,
         0.16515757,  0.08709627],
       [-0.12828277, -1.02969191,  0.23622217, -0.06153967, -0.31721347,
        -0.6818654 ,  0.68373706,  0.27014738,  0.53391541,  0.65929759,
         0.977295  ,  0.16515757],
       [ 0.12562716, -0.12828277, -1.02969191,  0.23622217, -0.06153967,
        -0.31721347, -0.6818654 ,  0.68373706,  0.27014738,  0.53391541,
         0.65929759,  0.977295  ],
       [ 1.10245179,  0.12562716, -0.12828277, -1.02969191,  0.23622217,
        -0.06153967, -0.31721347, -0.6818654 ,  0.68373706,  0.27014738,
         0.53391541,  0.65929759],
       [ 0.68719622,  1.10245179,  0.12562716, -0.12828277, -1.02969191,
         0.23622217, -0.06153967, -0.31721347, -0.6818654 ,  0.68373706,
         0.27014738,  0.53391541],
       [ 0.502832  ,  0.68719622,  1.10245179,  0.12562716, -0.12828277,
        -1.02969191,  0.23622217, -0.06153967, -0.31721347, -0.6818654 ,
         0.68373706,  0.27014738],
       [ 0.33004077,  0.502832  ,  0.68719622,  1.10245179,  0.12562716,
        -0.12828277, -1.02969191,  0.23622217, -0.06153967, -0.31721347,
        -0.6818654 ,  0.68373706],
       [ 0.6307032 ,  0.33004077,  0.502832  ,  0.68719622,  1.10245179,
         0.12562716, -0.12828277, -1.02969191,  0.23622217, -0.06153967,
        -0.31721347, -0.6818654 ],
       [-0.61587684,  0.6307032 ,  0.33004077,  0.502832  ,  0.68719622,
         1.10245179,  0.12562716, -0.12828277, -1.02969191,  0.23622217,
        -0.06153967, -0.31721347],
       [-0.35421566, -0.61587684,  0.6307032 ,  0.33004077,  0.502832  ,
         0.68719622,  1.10245179,  0.12562716, -0.12828277, -1.02969191,
         0.23622217, -0.06153967],
       [-0.11480872, -0.35421566, -0.61587684,  0.6307032 ,  0.33004077,
         0.502832  ,  0.68719622,  1.10245179,  0.12562716, -0.12828277,
        -1.02969191,  0.23622217],
       [ 0.28958921, -0.11480872, -0.35421566, -0.61587684,  0.6307032 ,
         0.33004077,  0.502832  ,  0.68719622,  1.10245179,  0.12562716,
        -0.12828277, -1.02969191]]

def predict():
    prediction=regressor.predict(sales_test_data)
    st.write(prediction)
    df=pd.DataFrame(prediction)
    df.to_csv('forecast.csv')

st.button("predict",on_click=predict)
